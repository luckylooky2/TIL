# 3.2 사용자 정의 훅과 고차 컴포넌트

- 리액트에서 재사용할 수 있는 로직을 관리할 수 있는 두 가지 방법이다.
- 공통된 코드를 하나로 만들 때 어떤 것을 선택해야 하는가?

## 사용자 정의 훅

- 서로 다른 컴포넌트 내부에서 같은 로직을 공유하고자 할 때 사용된다.
- 고차 컴포넌트는 리액트가 아니어도 사용할 수 있지만, 사용자 정의 훅은 리액트에서만 사용이 가능하다.
- 반드시 이름이 use로 시작해야 한다.
- 내부에서 useState, useEffect와 같은 훅을 사용하여 같은 로직을 재사용한다.
- use-Hooks, react-use, ahooks

[](./customHook/customHook.js)

## 고차 컴포넌트

- 고차 함수의 일종으로 컴포넌트 자체의 로직을 재사용하기 위한 방법이다.
- 대표적인 것으로 `React.memo`가 있다.

### React.memo

- 자식 컴포넌트가 사용하는 props가 바뀌지 않았는데도 부모 컴포넌트가 렌더링 되었기 때문에 리렌더링이 발생하는 문제를 막을 수 있다.
- 이전 props와 현재 props가 같다면, 기억해 둔 컴포넌트를 반환한다.
- 컴포넌트인 경우에는 useMemo 보다는 React.memo를 사용하는 것이 더 목적에 부합한다고 할 수 있다.

### 고차 함수를 활용한 리액트 고차 컴포넌트 만들어보기

- 인증된 사용자에게는 개인화된 컴포넌트를, 그렇지 않은 사용자에게는 로그인 컴포넌트를 보여주는 상황
- memo처럼 인자로 받은 컴포넌트와 관련된 로직을 추가할 수도 있다.(최적화, 렌더링 등...)

[](./highOrderComponent/highOrderComponent.js)

- 단순히 값을 반환하거나, 부수 효과를 실행하는 사용자 정의 훅과는 달리 고차 컴포넌트는 컴포넌트 전체에 영향을 줄 수 있다.
- use를 붙이는 것과 비슷하게 with를 붙이는 것이 관습이다.
- 고차 컴포넌트 내부에서는 인자로 받은 컴포넌트의 props를 건드리지 않아야 한다.
  - 왜냐하면 사용하는 입장에서는 기본적으로 props가 변경되지 않았다고 생각할 것이기 때문이다.
- 중첩해서 사용할 경우 가독성이 하락한다.

## 둘 중 무엇을 써야 할까?

### 사용자 정의 훅

- 단순히 useEffect와 useState만으로 공통 로직을 격리할 수 있는 경우 사용하면 좋다.
- 렌더링 로직에 직접적으로 개입하지 않고 단순히 데이터를 처리하고 반환하는 역할을 하기 때문에 컴포넌트에서 유연하게 활용할 수 있다.
- cf> 고차 컴포넌트는 대부분 렌더링에 영향을 미치는 부분이 존재하므로 예측이 어렵다.

### 고차 컴포넌트

- 렌더링 과정(결과물)에 영향을 미치는 로직이 있는 경우 고차 컴포넌트를 사용하는 것이 좋다.
- e.g. 로그인 컴포넌트: 상태 값에 따라서 다른 컴포넌트를 보여줘야(렌더링) 하는 경우
